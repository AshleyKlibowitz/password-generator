<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Password Generator</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <!-- Dark/Light mode toggle button -->
      <div class="mode-toggle">
        <button onclick="toggleMode()">
          <span>ðŸŒ™</span><span class="toggle-slash">/</span><span>ðŸŒž</span>
        </button>
      </div>

      <h1 id="title">Password Generator</h1>

      <!-- Controls for password customization -->
      <div class="controls">
        <!-- Dropdown to select the number of words -->
        <label>
          Words:
          <select id="wordCount">
            <option value="4">4</option>
            <option value="5" selected>5</option>
            <option value="6">6</option>
            <option value="7">7</option>
          </select>
        </label>

        <!-- Dropdown to select the separator between words -->
        <label>
          Separator:
          <select id="separator">
            <option value="">None</option>
            <option value="-">Dash (-)</option>
            <option value="_">Underscore (_)</option>
          </select>
        </label>

        <!-- Input for adding random letters -->
        <label>
          Random Letters:
          <input type="number" id="randomLetters" min="0" value="0" step="1" />
        </label>

        <!-- Input for adding random numbers -->
        <label>
          Random Numbers:
          <input type="number" id="randomNumbers" min="0" value="0" step="1" />
        </label>

        <!-- Input for adding random special characters -->
        <label>
          Random Special Characters:
          <input type="number" id="randomSpecials" min="0" value="0" step="1" />
        </label>

        <!-- Checkbox for enabling random capitalization -->
        <div class="checkbox-group">
          <label>
            <input type="checkbox" id="randomCaps" /> Random Capitalization
          </label>
        </div>
      </div>

      <!-- Output area for the generated password -->
      <div id="output">Your password will appear here</div>

      <!-- Button to generate the password -->
      <button class="generate-btn" onclick="generatePassphrase()">
        Generate Password
      </button>

      <!-- Button to copy the password to the clipboard -->
      <button class="copy-btn" id="copyBtn" onclick="copyToClipboard()">
        Copy to Clipboard
      </button>
    </div>

    <script>
      // List of words used to generate the passphrase
      const wordList = [
        "forest",
        "river",
        "cloud",
        "stone",
        "tree",
        "light",
        "ocean",
        "mountain",
        "fire",
        "earth",
        "wind",
        "sky",
        "dream",
        "leaf",
        "rain",
        "sun",
        "shadow",
        "star",
        "sand",
        "wolf",
        "night",
        "path",
        "field",
        "storm",
        "lake",
        "bird",
        "flower",
        "rock",
        "trail",
        "peace",
        "snow",
        "glade",
        "meadow",
        "brook",
        "valley",
        "horizon",
        "dawn",
        "dusk",
        "ember",
        "crystal",
        "breeze",
        "thunder",
        "whisper",
        "mist",
        "echo",
        "cliff",
        "glen",
        "cave",
        "gale",
        "frost",
        "blossom",
        "petal",
        "rainbow",
        "serenity",
        "calm",
        "celestial",
        "twilight",
        "quartz",
        "bark",
        "spruce",
        "pine",
        "flora",
        "fauna",
        "wilderness",
        "prairie",
        "glacier",
        "expanse",
        "garden",
        "orchard",
        "mineral",
        "sapphire",
        "lava",
        "volcano",
        "reef",
        "canyon",
        "desert",
        "jungle",
        "bloom",
        "honey",
        "solitude",
        "radiance",
        "cascade",
        "ripple",
        "current",
        "reflections",
        "vortex",
        "whirl",
        "spark",
        "ember",
        "fusion",
        "boulder",
        "arch",
        "lagoon",
        "delta",
        "island",
        "enchant",
        "fable",
        "saga",
      ];

      // List of special characters for the password
      const specialChars = [
        "!",
        "@",
        "#",
        "$",
        "%",
        "^",
        "&",
        "*",
        "(",
        ")",
        "-",
        "_",
        "=",
        "+",
        "[",
        "]",
        "{",
        "}",
        ";",
        ":",
        "'",
        '"',
        ",",
        ".",
        "/",
        "?",
        "~",
        "`",
      ];

      // Function to generate the passphrase
      function generatePassphrase() {
        // Get user inputs
        const wordCount = parseInt(document.getElementById("wordCount").value);
        const separator = document.getElementById("separator").value;
        const randomLetters = parseInt(
          document.getElementById("randomLetters").value
        );
        const randomNumbers = parseInt(
          document.getElementById("randomNumbers").value
        );
        const randomSpecials = parseInt(
          document.getElementById("randomSpecials").value
        );
        const randomCaps = document.getElementById("randomCaps").checked;

        let words = [];

        // Select random words from the word list
        for (let i = 0; i < wordCount; i++) {
          const word = wordList[Math.floor(Math.random() * wordList.length)];
          words.push(word);
        }

        // Combine words with the selected separator
        let passphrase = words.join(separator).split("");

        // Helper function to insert a character at a random position
        function insertRandomly(array, char) {
          const position = Math.floor(Math.random() * (array.length + 1));
          array.splice(position, 0, char);
        }

        // Add random numbers to the passphrase
        for (let i = 0; i < randomNumbers; i++) {
          const randomNum = Math.floor(Math.random() * 10).toString();
          insertRandomly(passphrase, randomNum);
        }

        // Add random special characters to the passphrase
        for (let i = 0; i < randomSpecials; i++) {
          const randomSpecial =
            specialChars[Math.floor(Math.random() * specialChars.length)];
          insertRandomly(passphrase, randomSpecial);
        }

        // Add random letters to the passphrase
        const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
        for (let i = 0; i < randomLetters; i++) {
          const randomLetter = chars[Math.floor(Math.random() * chars.length)];
          insertRandomly(passphrase, randomLetter);
        }

        // Apply random capitalization if enabled
        if (randomCaps) {
          passphrase = passphrase.map((char) =>
            Math.random() > 0.5 ? char.toUpperCase() : char.toLowerCase()
          );
        }

        // Display the generated passphrase
        document.getElementById("output").textContent = passphrase.join("");
      }

      // Function to copy the generated password to the clipboard
      function copyToClipboard() {
        const output = document.getElementById("output");
        const text = output.textContent || output.innerText;

        // Check if there is a password to copy
        if (text === "Your password will appear here") {
          alert("Please generate a password first!");
          return;
        }

        if (!text) {
          alert("Nothing to copy!");
          return;
        }

        // Check if the modern Clipboard API is supported and use it to copy text to the clipboard
        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard
            .writeText(text)
            .then(() => {
              alert("Password copied to clipboard!");
            })
            .catch((err) => {
              console.error("Failed to copy: ", err);
              alert("Failed to copy password.");
              copyUsingExecCommand(text); // Fallback method
            });
        } else {
          copyUsingExecCommand(text); // Fallback method
        }
      }

      // Fallback method for copying text (for older browsers)
      function copyUsingExecCommand(text) {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed"; // Prevent scrolling
        textArea.style.top = "-9999px";
        textArea.style.left = "-9999px";
        document.body.appendChild(textArea);
        textArea.select();
        try {
          const successful = document.execCommand("copy");
          if (successful) {
            alert("Password copied to clipboard! (using fallback method)");
          } else {
            alert("Failed to copy password. Please copy manually.");
          }
        } catch (err) {
          console.error("Fallback copy failed: ", err);
          alert("Failed to copy password. Please copy manually.");
        }
        document.body.removeChild(textArea);
      }

      // Function to toggle between light and dark modes
      function toggleMode() {
        document.body.classList.toggle("dark-mode");
      }
    </script>
  </body>
</html>
